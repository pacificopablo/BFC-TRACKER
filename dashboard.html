<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Dashboard â€“ Baccarat Fund Club</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-900 text-white p-6 min-h-screen">
  
    <div class="max-w-6xl mx-auto">
      <div class="mb-4 space-x-2 text-center">
        <button onclick="showTab('all')" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded">All</button>
        <button onclick="showTab('approved')" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded">Approved Only</button>
        <button onclick="showTab('pending')" class="bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded">Pending Only</button>
      </div>
    
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-3xl font-bold">ðŸ‘‘ Admin Dashboard</h1>
      <button onclick="logout()" class="bg-red-600 px-4 py-2 rounded hover:bg-red-700">Logout</button>
    </div>

    <h2 class="text-xl font-bold mb-2" id="approvedTitle">ðŸ“‹ Approved Members</h2>
    <div id="approvedList" class="grid md:grid-cols-2 gap-4 mb-10"></div>

    <h2 class="text-xl font-bold mb-2" id="pendingTitle">ðŸ•“ Pending Registrations</h2>
    <div id="pendingList" class="grid md:grid-cols-2 gap-4"></div>
  </div>

  <script>
    function logout() {
      localStorage.clear();
      window.location.href = 'index.html';
    }

    function getMembers() {
      let approved = JSON.parse(localStorage.getItem("newMembers") || "[]");
      let pending = JSON.parse(localStorage.getItem("pendingMembers") || "[]");
      return { approved, pending };
    }

    function saveMembers(approved, pending) {
      localStorage.setItem("newMembers", JSON.stringify(approved));
      localStorage.setItem("pendingMembers", JSON.stringify(pending));
    }

    function renderApproved(members) {
      const container = document.getElementById("approvedList");
      container.innerHTML = "";
      let totalShares = 0, totalBalance = 0;

      members.forEach((m, i) => {
        totalShares += m.shares;
        totalBalance += m.balance;

        const div = document.createElement("div");
        div.className = "bg-gray-800 p-4 rounded shadow space-y-2";
        div.innerHTML = `
          <p><strong>Name:</strong> <input value="${m.name}" onchange="updateField(${i}, 'name', this.value)" class="bg-gray-700 p-1 rounded w-full" /></p>
          <p><strong>Email:</strong> ${m.email}</p>
          <p><strong>Phone:</strong> <input value="${m.phone}" onchange="updateField(${i}, 'phone', this.value)" class="bg-gray-700 p-1 rounded w-full" /></p>
          <p><strong>Shares:</strong> <input type="number" value="${m.shares}" onchange="updateField(${i}, 'shares', this.value)" class="bg-gray-700 p-1 rounded w-full" /></p>
          <p><strong>Balance:</strong> â‚±<input type="number" value="${m.balance}" onchange="updateField(${i}, 'balance', this.value)" class="bg-gray-700 p-1 rounded w-full" /></p>
          <p><strong>Joined:</strong> ${m.joinDate}</p>
          <button onclick="removeMember(${i})" class="bg-red-600 mt-2 px-3 py-1 rounded hover:bg-red-700">Delete</button>
        `;
        container.appendChild(div);
      });

      const summary = document.createElement("div");
      summary.className = "col-span-2 bg-green-700 p-4 rounded mt-4";
      summary.innerHTML = `<strong>ðŸ“Š Total Shares:</strong> ${totalShares} | <strong>Total Balance:</strong> â‚±${totalBalance.toFixed(2)}`;
      container.appendChild(summary);
    }

    function renderPending(pending) {
      const container = document.getElementById("pendingList");
      container.innerHTML = "";
      pending.forEach((m, i) => {
        const div = document.createElement("div");
        div.className = "bg-gray-800 p-4 rounded shadow space-y-2";
        div.innerHTML = `
          <p><strong>Name:</strong> ${m.name}</p>
          <p><strong>Email:</strong> ${m.email}</p>
          <p><strong>Phone:</strong> ${m.phone}</p>
          <p><strong>Shares:</strong> ${m.shares}</p>
          <p><strong>Balance:</strong> â‚±${m.balance}</p>
          <p><strong>Joined:</strong> ${m.joinDate}</p>
          <div class="flex gap-4">
            <button onclick="approve(${i})" class="bg-green-600 px-3 py-1 rounded hover:bg-green-700">Approve</button>
            <button onclick="reject(${i})" class="bg-red-600 px-3 py-1 rounded hover:bg-red-700">Reject</button>
          </div>
        `;
        container.appendChild(div);
      });
    }

    function updateField(index, field, value) {
      const members = JSON.parse(localStorage.getItem("newMembers") || "[]");
      if (field === 'shares' || field === 'balance') {
        value = parseFloat(value);
      }
      members[index][field] = value;
      localStorage.setItem("newMembers", JSON.stringify(members));
      renderApproved(members);
    }

    function removeMember(index) {
      const members = JSON.parse(localStorage.getItem("newMembers") || "[]");
      if (confirm("Are you sure you want to delete this member?")) {
        members.splice(index, 1);
        localStorage.setItem("newMembers", JSON.stringify(members));
        renderApproved(members);
      }
    }

    function approve(i) {
      let pending = JSON.parse(localStorage.getItem("pendingMembers") || "[]");
      let approved = JSON.parse(localStorage.getItem("newMembers") || "[]");
      approved.push(pending[i]);
      pending.splice(i, 1);
      saveMembers(approved, pending);
      renderApproved(approved);
      renderPending(pending);
    }

    function reject(i) {
      let pending = JSON.parse(localStorage.getItem("pendingMembers") || "[]");
      if (confirm("Reject this pending registration?")) {
        pending.splice(i, 1);
        localStorage.setItem("pendingMembers", JSON.stringify(pending));
        renderPending(pending);
      }
    }

    const { approved, pending } = getMembers();
    renderApproved(approved);
    renderPending(pending);
  </script>

    <script>
      function showTab(tab) {
        const approvedSec = document.getElementById("approvedList");
        const pendingSec = document.getElementById("pendingList");
        const approvedTitle = document.getElementById("approvedTitle");
        const pendingTitle = document.getElementById("pendingTitle");

        if (tab === "approved") {
          approvedSec.style.display = "grid";
          approvedTitle.style.display = "block";
          pendingSec.style.display = "none";
          pendingTitle.style.display = "none";
        } else if (tab === "pending") {
          approvedSec.style.display = "none";
          approvedTitle.style.display = "none";
          pendingSec.style.display = "grid";
          pendingTitle.style.display = "block";
        } else {
          approvedSec.style.display = "grid";
          approvedTitle.style.display = "block";
          pendingSec.style.display = "grid";
          pendingTitle.style.display = "block";
        }
      }
    </script>
    </body>
    
</html>
